
import java.util.ArrayList;
import javax.swing.JOptionPane;

/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */

/**
 *
 * @author Amira Alissiya
 */
    public class TebakAngka extends javax.swing.JFrame {
    private ArrayList<String> list = new ArrayList<>();
    private int counter = 0;
    private int maks = 10;
    private int randomNum;  
    private boolean endGame = false;
    
    /**
     * Creates new form TebakAngka
     */
    public TebakAngka() {
        initComponents();
        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jTabbedPane1 = new javax.swing.JTabbedPane();
        jPanel1 = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jTTebak = new javax.swing.JTextField();
        jBTebak = new javax.swing.JButton();
        jBStart = new javax.swing.JButton();
        jPanel5 = new javax.swing.JPanel();
        jDesktopPane2 = new javax.swing.JDesktopPane();
        jInternalFrame1 = new javax.swing.JInternalFrame();
        jLabel6 = new javax.swing.JLabel();
        jTCek = new javax.swing.JTextField();
        jLabel7 = new javax.swing.JLabel();
        jTScore = new javax.swing.JTextField();
        jTAngka = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jLabel8 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTRiwayat = new javax.swing.JTextArea();
        jBKeluar = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowActivated(java.awt.event.WindowEvent evt) {
                formWindowActivated(evt);
            }
        });

        jPanel1.setLayout(new java.awt.GridLayout(1, 0));

        jPanel4.setBackground(new java.awt.Color(200, 230, 245));

        jLabel1.setFont(new java.awt.Font("Serif", 1, 18)); // NOI18N
        jLabel1.setText("LET'S PLAY!");

        jLabel2.setFont(new java.awt.Font("Serif", 1, 18)); // NOI18N
        jLabel2.setText("GUESS THE NUMBER FROM 1-100");

        jLabel3.setFont(new java.awt.Font("Segoe UI Semibold", 0, 14)); // NOI18N
        jLabel3.setText("Coba Tebak");

        jTTebak.setToolTipText("");

        jBTebak.setBackground(new java.awt.Color(255, 214, 214));
        jBTebak.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        jBTebak.setText("TEBAK");
        jBTebak.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jBTebakMouseClicked(evt);
            }
        });
        jBTebak.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBTebakActionPerformed(evt);
            }
        });

        jBStart.setBackground(new java.awt.Color(255, 214, 214));
        jBStart.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        jBStart.setText("START");
        jBStart.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBStartActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addGap(26, 26, 26)
                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel3)
                            .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addGroup(jPanel4Layout.createSequentialGroup()
                                    .addComponent(jBTebak)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(jBStart))
                                .addComponent(jTTebak, javax.swing.GroupLayout.PREFERRED_SIZE, 253, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addGap(16, 16, 16)
                        .addComponent(jLabel2))
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addGap(95, 95, 95)
                        .addComponent(jLabel1)))
                .addContainerGap(20, Short.MAX_VALUE))
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGap(24, 24, 24)
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jLabel2)
                .addGap(49, 49, 49)
                .addComponent(jLabel3)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTTebak, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(55, 55, 55)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jBTebak)
                    .addComponent(jBStart))
                .addContainerGap(163, Short.MAX_VALUE))
        );

        jPanel1.add(jPanel4);

        jInternalFrame1.setBackground(new java.awt.Color(102, 204, 255));
        jInternalFrame1.setVisible(false);

        jLabel6.setFont(new java.awt.Font("Segoe UI Semibold", 0, 14)); // NOI18N
        jLabel6.setText("Cek Angka");

        jTCek.setEditable(false);

        jLabel7.setFont(new java.awt.Font("Segoe UI Semibold", 0, 14)); // NOI18N
        jLabel7.setText("Score");

        jTScore.setEditable(false);

        jTAngka.setEditable(false);

        jLabel9.setFont(new java.awt.Font("Segoe UI Semibold", 0, 14)); // NOI18N
        jLabel9.setText("Angka :");

        javax.swing.GroupLayout jInternalFrame1Layout = new javax.swing.GroupLayout(jInternalFrame1.getContentPane());
        jInternalFrame1.getContentPane().setLayout(jInternalFrame1Layout);
        jInternalFrame1Layout.setHorizontalGroup(
            jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jInternalFrame1Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel9)
                .addGap(18, 18, 18)
                .addComponent(jTAngka, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(96, 96, 96))
            .addGroup(jInternalFrame1Layout.createSequentialGroup()
                .addGap(12, 12, 12)
                .addGroup(jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel6)
                    .addComponent(jLabel7))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jInternalFrame1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTScore)
                .addContainerGap())
            .addGroup(jInternalFrame1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTCek)
                .addContainerGap())
        );
        jInternalFrame1Layout.setVerticalGroup(
            jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jInternalFrame1Layout.createSequentialGroup()
                .addGap(36, 36, 36)
                .addComponent(jLabel6)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTCek, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(49, 49, 49)
                .addComponent(jLabel7)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jTScore, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(56, 56, 56)
                .addGroup(jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTAngka, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel9))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jDesktopPane2.setLayer(jInternalFrame1, javax.swing.JLayeredPane.DEFAULT_LAYER);

        javax.swing.GroupLayout jDesktopPane2Layout = new javax.swing.GroupLayout(jDesktopPane2);
        jDesktopPane2.setLayout(jDesktopPane2Layout);
        jDesktopPane2Layout.setHorizontalGroup(
            jDesktopPane2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jInternalFrame1, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
        );
        jDesktopPane2Layout.setVerticalGroup(
            jDesktopPane2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jInternalFrame1, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jDesktopPane2, javax.swing.GroupLayout.Alignment.TRAILING)
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jDesktopPane2)
        );

        jPanel1.add(jPanel5);

        jTabbedPane1.addTab("Play", jPanel1);

        jPanel2.setBackground(new java.awt.Color(198, 224, 250));
        jPanel2.setLayout(new java.awt.BorderLayout());

        jLabel8.setFont(new java.awt.Font("Perpetua Titling MT", 1, 24)); // NOI18N
        jLabel8.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel8.setText("SCORE");
        jLabel8.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jPanel2.add(jLabel8, java.awt.BorderLayout.PAGE_START);

        jTRiwayat.setBackground(new java.awt.Color(243, 243, 253));
        jTRiwayat.setColumns(20);
        jTRiwayat.setRows(5);
        jScrollPane1.setViewportView(jTRiwayat);

        jPanel2.add(jScrollPane1, java.awt.BorderLayout.CENTER);

        jBKeluar.setBackground(new java.awt.Color(200, 227, 255));
        jBKeluar.setFont(new java.awt.Font("Serif", 1, 14)); // NOI18N
        jBKeluar.setText("KELUAR");
        jBKeluar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jBKeluarMouseClicked(evt);
            }
        });
        jBKeluar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBKeluarActionPerformed(evt);
            }
        });
        jPanel2.add(jBKeluar, java.awt.BorderLayout.PAGE_END);

        jTabbedPane1.addTab("Score", jPanel2);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jTabbedPane1)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jTabbedPane1)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void formWindowActivated(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowActivated
        // TODO add your handling code here:
    }//GEN-LAST:event_formWindowActivated

    private void jBStartActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBStartActionPerformed
        // TODO add your handling code here:
        jInternalFrame1.setVisible(true);
        jBStart.setText("RESET");
        randomNum = (int) (Math.random() * 100);

        jTCek.setText("");
        jTScore.setText("");
        jTAngka.setText("");
        jTTebak.setText("");
        maks = 10;
        counter = 0;
    }//GEN-LAST:event_jBStartActionPerformed

    private void jBTebakActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBTebakActionPerformed
        // TODO add your handling code here:
        try {
            if (jBStart.getText().equals("START")) {
                JOptionPane.showMessageDialog(this, "Klik button 'Start' untuk memulai permainan.", "Peringatan", JOptionPane.WARNING_MESSAGE);
                jTTebak.setText("");
                jTTebak.requestFocus();
                return;
            }
            
            if (jTTebak.getText().isEmpty()) {
                JOptionPane.showMessageDialog(this, "Masukkan Angka Terlebih Dahulu!", "Peringatan", JOptionPane.WARNING_MESSAGE);
                jTTebak.setText("");
                jTTebak.requestFocus();
                return;
            }


            int input = Integer.parseInt(jTTebak.getText());
//            jTAngka.setText(String.valueOf(randomNum));

            if (input == 0 || input > 100){
                JOptionPane.showMessageDialog(this, "Range Angka 1-100", "Peringatan", JOptionPane.WARNING_MESSAGE);
                jTTebak.setText(""); 
                jTTebak.requestFocus();
                return; 
            }
            
            if (input > randomNum) {
                jTCek.setText("Masukkan Angka yang lebih kecil");
            } else if (input < randomNum) {
                jTCek.setText("Masukkan Angka yang lebih besar");
            } else {
                jTCek.setText("Selamat Anda Berhasil Menebak Dengan Benar!");
                jTAngka.setText(String.valueOf(randomNum));
//                jBStart.setText("START");
//                endGame = true;

                String userName = JOptionPane.showInputDialog(this, "Masukkan nama Anda:", "Tebakan Benar!", JOptionPane.PLAIN_MESSAGE);
                if (userName == null || userName.trim().isEmpty()) {
                    userName = "Pengguna Tanpa Nama";
                }

                int sisa = maks - counter;
                int score = sisa * 10;
                jTScore.setText("Jumlah Score: " + score);

//                list
                list.add(userName + " - Score: " + score);
                StringBuilder history = new StringBuilder();
                for (String nama : list) {
                    history.append("Nama: "+nama+"\n");  // Tambahkan newline untuk setiap entry
                }
                jTRiwayat.setText(history.toString());
            }

            
            if (!endGame && counter < maks - 1) {
                counter++;
                int sisa = maks - counter;
                JOptionPane.showMessageDialog(this, "Sisa kesempatan: " + sisa, "Tebakan", JOptionPane.INFORMATION_MESSAGE);
                jTTebak.setText("");
                jTTebak.requestFocus();
            } else if (counter >= maks - 1){
                JOptionPane.showMessageDialog(this, "Sisa kesempatan: 0\nAnda Gagal!", "Game Over", JOptionPane.INFORMATION_MESSAGE);
                jBStart.setText("RESET");
                randomNum = (int) (Math.random() * 100);

                jTCek.setText("");
                jTScore.setText("");
                jTAngka.setText("");
                jTTebak.setText("");
                maks = 10;
                counter = 0;
            }
            
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Input Invalid", "Kesalahan Input", JOptionPane.ERROR_MESSAGE);
        }         
    }//GEN-LAST:event_jBTebakActionPerformed

    private void jBTebakMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jBTebakMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_jBTebakMouseClicked

    private void jBKeluarMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jBKeluarMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_jBKeluarMouseClicked

    private void jBKeluarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBKeluarActionPerformed
        // TODO add your handling code here:
        int keluar = JOptionPane.showConfirmDialog(null, "Apakah Anda yakin ingin meninggalkan permainan?", 
        "Konfirmasi", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);
        
        if (keluar == JOptionPane.YES_OPTION) {
            dispose(); 
        } else{
            return;
        }
    }//GEN-LAST:event_jBKeluarActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TebakAngka.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TebakAngka.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TebakAngka.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TebakAngka.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new TebakAngka().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jBKeluar;
    private javax.swing.JButton jBStart;
    private javax.swing.JButton jBTebak;
    private javax.swing.JDesktopPane jDesktopPane2;
    private javax.swing.JInternalFrame jInternalFrame1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextField jTAngka;
    private javax.swing.JTextField jTCek;
    private javax.swing.JTextArea jTRiwayat;
    private javax.swing.JTextField jTScore;
    private javax.swing.JTextField jTTebak;
    private javax.swing.JTabbedPane jTabbedPane1;
    // End of variables declaration//GEN-END:variables


}
